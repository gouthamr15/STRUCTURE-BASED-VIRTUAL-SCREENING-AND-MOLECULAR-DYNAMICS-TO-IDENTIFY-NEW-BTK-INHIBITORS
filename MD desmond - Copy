##molecular dynamics with Desmond##

desmond_nvt_relax.msj file ( edit the minimisation steps accordingly )

command for running the MD simulation (multisim)

$SCHRODINGER/utilities/multisim -JOBNAME ETH_C1_run2 -HOST parallel -maxjob 1 -cpu 24 -m ETH_C1_Run.msj -c ETH_C1_Run.cfg -description "Molecular Dynamics" ETH_C1_Run.cms -mode umbrella -DISP ignore -o ETH_C1_Run1-out.cms 
 
 * input.msj file
 * input.cfg file
 * input.cms file

For repeats, you can use the XX-in.cms file generated from stage 8 of multisim. 

##For minimisation, include following commands in the start (after task 1) in the input msj file

minimize {
   title                  = "Minimization with restraints on non solvent heavy atoms"
   max_steps              = 10000
   steepest_descent_steps = 50
   convergence            = 0.5
   restrain               = { atom = 'asl: (NOT ((SMARTS. \"[H]O[H]\") AND NOT (atom.i_wmap_restrain 1) ) ) AND NOT (atom.ele H)' force_constant = 5.0 }
}

##run masetro in interactive node##

ssh -X mcconejo@raapoi.vuw.ac.nz
module load Schrodinger/2019-2
srun --pty --x11 -c8 --mem=8G maestro

## To start a simulation from the command line ##

desmond -JOBNAME ZETH_C1_run3_again -HOST parallel:24 -in ZETH_C1_run1-in.cms -c ZETH_C1_run3-in.cfg

## To continue failed simulation from checkpoint file

desmond -JOBNAME ETH_C1_run5_cont -HOST parallel:24 -restore ETH_C1_run2.cpt -in desmond_md_job_4-in.cms -c desmond_md_job_4-out.cfg

$SCHRODINGER/utilities/multisim -HOST parallel -cpu 128 -r mol1_md_10ns-multisim_checkpoint_9 -d mol1_md_10ns_8-out.tgz -JOBNAME mol1_md_10ns_exten 

desmond -JOBNAME ETH_C1_run5_cont -HOST parallel:24 -restore ETH_C1_run5.cptl

## Extend silumlation ##

$SCHRODINGER/desmond -JOBNAME ZETH_C1_run1_again -HOST parallel:24 -restore ETH_MD_1_resume.cpt -cfg mdsim.last_time=30000


## merge trajectories in Schrodinger power Shell ##

run trj_merge.py ETH_C1_run2-out.cms ETH_C1_run2_trj ETH_C1_run2_cont_trj


run trj_merge.py out.cms traj1 traj2 traj3 -o merged-out